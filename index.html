<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>MOCK-UCTION LEAGUE - IPL 2026 Mega Auction</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="https://iplstatic.s3.amazonaws.com/ipl/logo.png">
<script src="https://cdn.jsdelivr.net/npm/confetti-js@0.0.18/dist/index.min.js"></script>
<style>
:root{
  --bg:#0f172a;--card:#1e293b;--text:#e2e8f0;--green:#10b981;--red:#ef4444;--gold:#fbbf24;
  --blue:#3b82f6;--orange:#ff6d00;--purple:#a855f7;--border:#334155;
  --csk:#ffcc29;--mi:#004ba0;--rcb:#d11f2a;--kkr:#3b215d;--srh:#ff8c00;
  --gt:#1c1c3a;--lsg:#00a0e3;--dc:#004c93;--pbks:#d71920;--rr:#ea1a85;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{background:var(--bg);color:var(--text);min-height:100vh;}
.container{max-width:1600px;margin:0 auto;padding:20px;}

header{text-align:center;padding:50px;background:linear-gradient(135deg,#000428,#004e92);border-bottom:10px solid var(--gold);}
h1{font-size:4rem;color:var(--gold);text-shadow:0 0 50px #000;letter-spacing:3px;}
.subtitle{font-size:1.6rem;color:#94a3b8;margin-top:10px;}

.top-bar{display:flex;justify-content:space-between;align-items:center;margin:30px 0;flex-wrap:wrap;gap:20px;}
.status{padding:15px 40px;border-radius:60px;font-weight:bold;font-size:1.6rem;}
.status.live{background:#166534;color:white;}
.status.paused{background:#ca8a04;color:white;}
.status.stopped{background:#991b1b;color:white;}
.timer{background:var(--card);padding:15px 40px;border-radius:60px;border:5px solid var(--gold);font-size:2rem;font-weight:bold;}

.set-nav{display:flex;justify-content:center;gap:20px;align-items:center;margin:30px 0;flex-wrap:wrap;}
.set-btn{padding:15px 40px;background:var(--purple);color:white;border:none;border-radius:60px;font-size:1.4rem;font-weight:bold;cursor:pointer;box-shadow:0 15px 40px rgba(168,85,247,0.5);}
.set-btn:hover{transform:scale(1.05);}
.set-info{font-size:2rem;color:var(--gold);font-weight:900;margin:0 20px;text-align:center;}

.grid{display:grid;grid-template-columns:1fr 480px;gap:30px;margin-top:30px;}
@media(max-width:1200px){.grid{grid-template-columns:1fr;}}

.card{background:var(--card);border-radius:30px;padding:30px;border:3px solid var(--border);margin-bottom:30px;box-shadow:0 20px 60px rgba(0,0,0,0.8);}
.player-card{text-align:center;}
.player-photo{width:200px;height:200px;background:#334155;border-radius:50%;margin:0 auto 25px;display:flex;align-items:center;justify-content:center;font-size:80px;font-weight:bold;color:#64748b;border:10px solid var(--gold);}
.current-bid{background:var(--green);color:black;padding:30px;border-radius:35px;font-size:3rem;font-weight:900;margin:30px 0;box-shadow:0 20px 50px rgba(16,185,129,0.7);}
.bid-team{display:flex;align-items:center;justify-content:center;gap:30px;margin:30px 0;flex-wrap:wrap;}
.team-logo{width:90px;height:90px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:2rem;box-shadow:0 15px 40px rgba(0,0,0,0.8);background:#020617;color:#e5e7eb;}
.interested{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:20px 0;}
.tag{background:#334155;padding:8px 16px;border-radius:50px;font-weight:700;font-size:0.9rem;}

.team-table{width:100%;border-collapse:collapse;margin-top:15px;font-size:0.9rem;}
.team-table th,.team-table td{padding:10px;border:2px solid var(--border);text-align:center;}
.team-table th{background:#111827;}

.login-section{background:var(--card);padding:30px;border-radius:35px;text-align:center;margin:30px 0;box-shadow:0 30px 80px rgba(0,0,0,0.9);}
.login-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:15px;margin-top:20px;}
.login-option{padding:20px;background:var(--blue);color:white;border-radius:20px;font-size:1.3rem;font-weight:bold;cursor:pointer;transition:0.3s;}
.login-option:hover{transform:scale(1.05);box-shadow:0 15px 40px rgba(59,130,246,0.6);}
.login-option.csk{background:var(--csk);color:#000;}
.login-option.mi{background:var(--mi);}
.login-option.rcb{background:var(--rcb);}
.login-option.kkr{background:var(--kkr);}
.login-option.srh{background:var(--srh);}
.login-option.gt{background:var(--gt);}
.login-option.lsg{background:var(--lsg);}
.login-option.dc{background:var(--dc);}
.login-option.pbks{background:var(--pbks);}
.login-option.rr{background:var(--rr);}
.login-option.curator{background:#000;color:var(--gold);border:3px solid var(--gold);}

.team-bid-panel{display:none;background:var(--card);padding:30px;border-radius:35px;text-align:center;border:4px solid var(--gold);margin:30px 0;}
.bid-buttons{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin:25px 0;}
.bid-btn{padding:20px;font-size:1.4rem;font-weight:bold;border-radius:25px;cursor:pointer;background:var(--green);color:black;box-shadow:0 15px 40px rgba(16,185,129,0.6);border:none;}
.bid-btn:hover{transform:scale(1.05);}

.btn{padding:14px 28px;border-radius:25px;border:none;cursor:pointer;font-weight:bold;font-size:1.1rem;}
.btn-green{background:var(--green);color:#000;}
.btn-red{background:var(--red);color:#fff;}
.btn-orange{background:var(--orange);color:#fff;}
.btn-purple{background:var(--purple);color:#fff;}

.admin-panel{display:none;margin-top:30px;}
.admin-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;margin-top:20px;}

.mode-toggle{position:fixed;top:20px;right:20px;z-index:9999;background:var(--card);padding:12px 18px;border-radius:30px;cursor:pointer;font-size:0.9rem;box-shadow:0 10px 25px rgba(0,0,0,0.7);}
.log-list{list-style:none;padding:0;margin:0;}
.log-list li{padding:6px 0;border-bottom:1px solid #1f2937;font-size:0.85rem;}
</style>
</head>
<body>

<div class="mode-toggle" onclick="toggleView()">Toggle Compact View</div>

<div class="container">
  <header>
    <h1>MOCK-UCTION LEAGUE</h1>
    <p class="subtitle">IPL 2026 MEGA AUCTION – OFFICIAL MOCK SYSTEM</p>
  </header>

  <div class="top-bar">
    <div class="status stopped" id="statusText">NOT STARTED</div>
    <div class="timer">Time: <span id="timer">01:00</span></div>
  </div>

  <div class="set-nav">
    <button class="set-btn" onclick="prevSet()">Previous Set</button>
    <div class="set-info" id="setInfo">SET 1 — BATTERS</div>
    <button class="set-btn" onclick="nextSet()">Next Set</button>
  </div>

  <div id="mainView">
    <div class="grid">
      <div>
        <div class="card player-card">
          <h2 style="color:var(--gold);font-size:2rem;">CURRENT PLAYER</h2>
          <div class="player-photo" id="playerPhoto">DC</div>
          <h2 id="playerName" style="font-size:2.4rem;margin:20px 0;">Devon Conway</h2>
          <p id="playerInfo" style="font-size:1.2rem;margin:15px 0;">Batsman • New Zealand • Base: ₹2.00 Cr</p>

          <div class="current-bid" id="currentBid">₹ 2.00 Cr</div>

          <div class="bid-team">
            <div class="team-logo" id="bidTeamLogo">--</div>
            <div>
              <div style="opacity:0.8;font-size:1rem;">Highest Bidder</div>
              <div id="bidTeamName" style="font-size:1.8rem;font-weight:900;">No bids yet</div>
            </div>
          </div>

          <div class="interested" id="interestedTeams"></div>

          <div id="soldUnsoldButtons" style="margin-top:20px;display:none;gap:10px;justify-content:center;flex-wrap:wrap;">
            <button class="btn btn-green" onclick="soldToCurrent()">SOLD</button>
            <button class="btn btn-red" onclick="unsoldCurrent()">UNSOLD</button>
          </div>
        </div>
      </div>

      <div>
        <div class="card">
          <h3 style="color:var(--gold);font-size:1.4rem;margin-bottom:10px;">TEAM PURSE & SLOTS</h3>
          <table class="team-table" id="teamTable">
            <thead><tr><th>Team</th><th>Purse</th><th>Slots</th><th>OS</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="card">
          <h3 style="color:var(--gold);font-size:1.4rem;margin-bottom:10px;">LIVE BID LOG</h3>
          <div style="max-height:350px;overflow-y:auto;">
            <ul class="log-list" id="activityList">
              <li>Waiting for auction to start...</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- LOGIN SECTION -->
  <div class="login-section">
    <h2 style="font-size:2rem;color:var(--gold);margin-bottom:10px;">SELECT YOUR TEAM / ROLE</h2>
    <p style="font-size:0.9rem;opacity:0.8;">Preset usernames & passwords are built-in. Just tap your team.</p>
    <div class="login-grid">
      <div class="login-option csk" onclick="tryLogin('csk_auction_team','CSK_2026*Pass')">CSK</div>
      <div class="login-option mi" onclick="tryLogin('mi_team2026','MI@Auction26')">MI</div>
      <div class="login-option rcb" onclick="tryLogin('rcb_fanclub_26','RCBpass$2026')">RCB</div>
      <div class="login-option kkr" onclick="tryLogin('kkr_official_26','KKRpass@2026')">KKR</div>
      <div class="login-option srh" onclick="tryLogin('srh_official26','SRH_2026*pass')">SRH</div>
      <div class="login-option gt" onclick="tryLogin('gt_auction_team','GT2026#pass')">GT</div>
      <div class="login-option lsg" onclick="tryLogin('lsg_auction','LSG#2026Pass')">LSG</div>
      <div class="login-option dc" onclick="tryLogin('dc_team_2026','DCauction@26')">DC</div>
      <div class="login-option pbks" onclick="tryLogin('pbks_2026','PBKS2026!pass')">PBKS</div>
      <div class="login-option rr" onclick="tryLogin('rr_fans2026','RR!2026#Pass')">RR</div>
      <div class="login-option curator" onclick="tryLogin('qwertyuiop','bluezone0025')">CURATOR</div>
    </div>
  </div>

  <!-- TEAM BIDDING PANEL -->
  <div class="team-bid-panel" id="teamBidPanel">
    <h2 id="teamNameDisplay" style="font-size:2rem;color:var(--gold);">TEAM NAME</h2>
    <div class="current-bid" style="font-size:2.4rem;" id="teamCurrentBid">₹ 0 Cr</div>
    <div class="bid-buttons">
      <button class="bid-btn" onclick="teamBid(0.25)">+0.25</button>
      <button class="bid-btn" onclick="teamBid(0.50)">+0.50</button>
      <button class="bid-btn" onclick="teamBid(1)">+1 Cr</button>
      <button class="bid-btn" onclick="teamBid(2)">+2 Cr</button>
      <button class="bid-btn" onclick="teamBid(5)">+5 Cr</button>
      <button class="bid-btn" onclick="teamBid(10)">+10 Cr</button>
    </div>
    <p style="font-size:1.1rem;margin-top:10px;">
      Purse: <span id="teamPurse">₹0 Cr</span> | Slots: <span id="teamSlots">0</span>
    </p>
  </div>

  <!-- ADMIN PANEL -->
  <div class="card admin-panel" id="adminPanel">
    <h2 style="color:var(--red);text-align:center;font-size:1.8rem;margin-bottom:20px;">CURATOR CONTROL</h2>
    <div style="display:flex;gap:10px;justify-content:center;margin-bottom:15px;flex-wrap:wrap;">
      <button class="btn btn-green" onclick="startAuction()">START</button>
      <button class="btn btn-orange" onclick="pauseAuction()">PAUSE</button>
      <button class="btn btn-red" onclick="stopAuction()">STOP</button>
    </div>
    <div class="admin-grid">
      <button class="btn btn-green" onclick="soldToCurrent()">SOLD</button>
      <button class="btn btn-red" onclick="unsoldCurrent()">UNSOLD</button>
      <button class="btn btn-purple" onclick="nextPlayer()">NEXT</button>
      <button class="btn btn-orange" onclick="randomPlayer()">RANDOM</button>
    </div>
  </div>
</div>

<audio id="bidSound" src="https://assets.mixkit.co/sfx/preview/mixkit-coin-win-notification-2634.mp3"></audio>
<audio id="soldSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-gong-1939.mp3"></audio>
<audio id="timerBeep" src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3"></audio>

<script>
// --- CORE STATE ---
let data = { sets: [], teams: [] };
let currentSet = 0, currentPlayer = 0;
let auctionOn = false, isAdmin = false, loggedInTeam = null;
let currentBid = 0, highestBidder = null;
let timerInterval = null;
let timerValue = 60;

// load data.json
fetch('data.json')
  .then(r => r.json())
  .then(d => {
    data = d;
    renderTeams();
    updateSetInfo();
    showPlayer(0, 0);
    loadLoginState();
  })
  .catch(() => {
    document.getElementById('activityList').innerHTML =
      '<li style="color:#f87171;">data.json not found – place it next to index.html</li>';
  });

// login persistence
function saveLoginState() {
  if (isAdmin) localStorage.setItem("auction_login", JSON.stringify({type:"admin"}));
  else if (loggedInTeam) localStorage.setItem("auction_login", JSON.stringify({type:"team", team_name:loggedInTeam.team_name}));
}

function loadLoginState() {
  const saved = localStorage.getItem("auction_login");
  if (!saved) return;
  const state = JSON.parse(saved);
  if (state.type === "admin") {
    isAdmin = true;
    document.getElementById("adminPanel").style.display = "block";
    document.getElementById("soldUnsoldButtons").style.display = "flex";
  } else if (state.type === "team") {
    const t = data.teams.find(tt => tt.team_name === state.team_name);
    if (!t) return;
    loggedInTeam = t;
    document.getElementById("teamBidPanel").style.display = "block";
    document.getElementById("teamNameDisplay").textContent = t.team_name;
    document.getElementById("teamPurse").textContent = `₹${t.purse_crores} Cr`;
    document.getElementById("teamSlots").textContent = t.overall_slots_left;
  }
}

// login logic
function tryLogin(username, password) {
  if (username === "qwertyuiop" && password === "bluezone0025") {
    isAdmin = true;
    document.getElementById("adminPanel").style.display = "block";
    document.getElementById("soldUnsoldButtons").style.display = "flex";
    alert("Curator Login Success!");
    saveLoginState();
    return;
  }
  const team = data.teams.find(t => t.username === username && t.password === password);
  if (team) {
    loggedInTeam = team;
    document.getElementById("teamBidPanel").style.display = "block";
    document.getElementById("teamNameDisplay").textContent = team.team_name;
    document.getElementById("teamPurse").textContent = `₹${team.purse_crores} Cr`;
    document.getElementById("teamSlots").textContent = team.overall_slots_left;
    alert(`Welcome ${team.team_name}!`);
    saveLoginState();
  } else {
    alert("Wrong Password!");
  }
}

// UI helpers
function play(id) {
  const el = document.getElementById(id);
  if (!el) return;
  el.currentTime = 0;
  el.play().catch(()=>{});
}

function log(msg) {
  const ul = document.getElementById('activityList');
  const li = document.createElement('li');
  li.textContent = msg;
  ul.insertBefore(li, ul.firstChild);
}

// player/set
function updateSetInfo() {
  if (!data.sets.length) return;
  const s = data.sets[currentSet];
  document.getElementById("setInfo").textContent = `SET ${s.set_number} — ${s.set_name}`;
}

function showPlayer(setIdx, playerIdx) {
  if (!data.sets.length) return;
  const set = data.sets[setIdx];
  const p = set.players[playerIdx];
  currentSet = setIdx; currentPlayer = playerIdx;

  document.getElementById("playerName").textContent = p.name;
  document.getElementById("playerInfo").textContent =
    `${p.role.toUpperCase()} • ${p.country} • Base: ₹${p.base_price_crore} Cr`;
  document.getElementById("playerPhoto").textContent =
    p.name.split(" ").map(n=>n[0]).join("").toUpperCase();

  currentBid = p.current_price || p.base_price_crore;
  document.getElementById("currentBid").textContent = `₹ ${currentBid.toFixed(2)} Cr`;

  highestBidder = p.highestBidder || null;
  document.getElementById("bidTeamName").textContent = highestBidder ? highestBidder.team_name : "No bids yet";
  document.getElementById("bidTeamLogo").textContent =
    highestBidder ? highestBidder.team_name.slice(0,3).toUpperCase() : "--";

  document.getElementById("interestedTeams").innerHTML = "";
  log(`Player: ${p.name} (₹${p.base_price_crore} Cr)`);
  updateSetInfo();
}

function prevSet() {
  if (!data.sets.length) return;
  currentSet = (currentSet - 1 + data.sets.length) % data.sets.length;
  currentPlayer = 0;
  showPlayer(currentSet, currentPlayer);
}

function nextSet() {
  if (!data.sets.length) return;
  currentSet = (currentSet + 1) % data.sets.length;
  currentPlayer = 0;
  showPlayer(currentSet, currentPlayer);
}

function nextPlayer() {
  if (!data.sets.length) return;
  const set = data.sets[currentSet];
  currentPlayer++;
  if (currentPlayer >= set.players.length) {
    currentPlayer = 0;
    currentSet = (currentSet + 1) % data.sets.length;
  }
  showPlayer(currentSet, currentPlayer);
}

// team table
function renderTeams() {
  if (!data.teams) return;
  const tbody = document.querySelector('#teamTable tbody');
  tbody.innerHTML = '';
  data.teams.forEach(t => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${t.team_name}</td>
      <td>₹${t.purse_crores} Cr</td>
      <td>${t.overall_slots_left}</td>
      <td>${t.os_slots_left || '-'}</td>
    `;
    tbody.appendChild(tr);
  });
}

// timer / auction control
function startAuction() {
  if (auctionOn) return;
  auctionOn = true;
  document.getElementById('statusText').textContent = 'LIVE';
  document.getElementById('statusText').className = 'status live';
  timerValue = 60;
  if (timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timerValue--;
    if (timerValue <= 5) play('timerBeep');
    if (timerValue <= 0) {
      timerValue = 60;
      nextPlayer();
    }
    document.getElementById('timer').textContent =
      `00:${timerValue.toString().padStart(2,'0')}`;
  }, 1000);
  log('Auction started');
}

function pauseAuction() {
  auctionOn = false;
  document.getElementById('statusText').textContent = 'PAUSED';
  document.getElementById('statusText').className = 'status paused';
  if (timerInterval) clearInterval(timerInterval);
  log('Auction paused');
}

function stopAuction() {
  auctionOn = false;
  document.getElementById('statusText').textContent = 'STOPPED';
  document.getElementById('statusText').className = 'status stopped';
  if (timerInterval) clearInterval(timerInterval);
  timerValue = 60;
  document.getElementById('timer').textContent = '01:00';
  log('Auction stopped');
}

// bidding
function teamBid(amount) {
  if (!loggedInTeam) {
    alert('Login as team first');
    return;
  }
  if (loggedInTeam.purse_crores < amount) {
    alert('Insufficient purse');
    return;
  }
  loggedInTeam.purse_crores -= amount;
  currentBid += amount;
  highestBidder = loggedInTeam;

  document.getElementById('currentBid').textContent = `₹ ${currentBid.toFixed(2)} Cr`;
  document.getElementById('bidTeamName').textContent = loggedInTeam.team_name;
  document.getElementById('bidTeamLogo').textContent = loggedInTeam.team_name.slice(0,3).toUpperCase();
  document.getElementById('teamPurse').textContent = `₹${loggedInTeam.purse_crores.toFixed(2)} Cr`;
  play('bidSound');
  log(`${loggedInTeam.team_name} bid +₹${amount} Cr (Total: ₹${currentBid.toFixed(2)} Cr)`);
  renderTeams();
}

function soldToCurrent() {
  if (!highestBidder) {
    alert('No highest bidder');
    return;
  }
  play('soldSound');
  log(`SOLD: ${data.sets[currentSet].players[currentPlayer].name} to ${highestBidder.team_name} for ₹${currentBid.toFixed(2)} Cr`);
  nextPlayer();
}

function unsoldCurrent() {
  log(`UNSOLD: ${data.sets[currentSet].players[currentPlayer].name}`);
  nextPlayer();
}

function randomPlayer() {
  if (!data.sets.length) return;
  currentSet = Math.floor(Math.random() * data.sets.length);
  currentPlayer = Math.floor(Math.random() * data.sets[currentSet].players.length);
  showPlayer(currentSet, currentPlayer);
  log('Random player selected');
}

// simple compact toggle (optional)
function toggleView() {
  document.body.classList.toggle('compact');
}
</script>
</body>
</html>
